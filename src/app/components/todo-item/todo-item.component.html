<div class="todo-item">
  <mat-checkbox
    class="todo-checkbox"
    *ngIf="completedControl"
    [formControl]="completedControl"
    (change)="toggleTodo()"
  ></mat-checkbox>

  <div class="todo-title-container" (click)="editTodo()">
    <span *ngIf="titleControl && !isEditing" (click)="editTodo()">
      {{ titleControl.value }}
    </span>

    <mat-form-field
      *ngIf="titleControl && isEditing"
      appearance="outline"
      class="todo-edit-field"
    >
      <textarea
        matInput
        #titleInput
        cdkTextareaAutosize
        [cdkAutosizeMinRows]="1"
        [cdkAutosizeMaxRows]="5"
        [formControl]="titleControl"
        (blur)="saveEdit()"
        (keydown.enter)="onEnterKey($event)"
        (keydown.escape)="onEscapeKey()"
        placeholder="Enter todo title"
      ></textarea>
    </mat-form-field>
  </div>

  <button
    type="button"
    mat-icon-button
    color="warn"
    (click)="deleteTodo()"
    class="delete-btn"
  >
    <mat-icon>delete</mat-icon>
  </button>
</div>
